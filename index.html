<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <!-- 1. è§£æ±ºäº‚ç¢¼ï¼šå¿…é ˆæ”¾åœ¨æœ€å‰é¢ -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç¦å²¡ 2026 | Kuromi å®¶æ—å¤§å†’éšª</title>

    <!-- 2. æ ¸å¿ƒåº«å¼•å…¥ -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 3. Firebase SDK (ç›¸å®¹ç‰ˆ) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <!-- 4. åœ–æ¨™åº« (Lucide) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* å¼•å…¥å¯æ„›é¢¨æ ¼çš„å¿«æ¨‚é«” */
        @import url('https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap');
        
        :root {
            --kuromi-purple: #9D76C1;
            --kuromi-dark: #2D2727;
            --kuromi-pink: #FF91C1;
            --kuromi-bg: #F9F7FC;
        }

        body { 
            font-family: 'ZCOOL KuaiLe', cursive; 
            background-color: var(--kuromi-bg); 
            color: var(--kuromi-dark);
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        .kuromi-gradient { background: linear-gradient(135deg, #9D76C1 0%, #765898 100%); }
        .bg-pattern { 
            background-image: radial-gradient(var(--kuromi-purple) 0.5px, transparent 0.5px); 
            background-size: 20px 20px; 
        }

        .kuromi-card { 
            background: white; 
            border-radius: 40px; 
            border: 4px solid #E2D9F3; 
            box-shadow: 0 10px 25px rgba(157, 118, 193, 0.08);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .modal-mask {
            background-color: rgba(0, 0, 0, 0.65);
            backdrop-filter: blur(12px);
        }

        .hide-scrollbar::-webkit-scrollbar { display: none; }

        @keyframes pulse-custom {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.95); }
        }
        .animate-pulse-soft { animation: pulse-custom 2s infinite ease-in-out; }
    </style>
</head>
<body class="bg-pattern">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- Firebase åˆå§‹åŒ–å€å¡Š ---
        // åœ¨ GitHub ç’°å¢ƒä¸­ï¼Œå¦‚æœæ²’æœ‰è‡ªå‹•æ³¨å…¥è¨­å®šï¼Œè«‹æ‰‹å‹•å¡«å¯«ä¸‹æ–¹çš„ config
        let firebaseConfig = {};
        try {
            if (typeof __firebase_config !== 'undefined') {
                firebaseConfig = JSON.parse(__firebase_config);
            } else {
                // âš ï¸ å¦‚æœæ‚¨çœ‹åˆ°ã€Œè¨­å®šç¼ºå¤±ã€ç•«é¢ï¼Œè«‹å°‡æ‚¨çš„ Firebase SDK é…ç½®è²¼åˆ°é€™è£¡
                firebaseConfig = {
                    apiKey: "",
                    authDomain: "",
                    projectId: "",
                    storageBucket: "",
                    messagingSenderId: "",
                    appId: ""
                };
            }
        } catch (e) {
            console.error("Firebase config parsing error", e);
        }

        // åˆå§‹åŒ–æª¢æŸ¥
        const isConfigValid = firebaseConfig && firebaseConfig.apiKey;
        if (isConfigValid) {
            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }
        }

        const auth = isConfigValid ? firebase.auth() : null;
        const db = isConfigValid ? firebase.firestore() : null;
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'fukuoka-trip-2026';

        // åœ–æ¨™çµ„ä»¶
        const Icon = ({ name, className = "w-6 h-6", size }) => {
            useEffect(() => { if (window.lucide) window.lucide.createIcons(); }, [name]);
            return <i data-lucide={name} className={className} style={size ? {width:size, height:size} : {}}></i>;
        };

        const App = () => {
            const [user, setUser] = useState(null);
            const [activeTab, setActiveTab] = useState('itinerary'); 
            const [itineraryView, setItineraryView] = useState('list'); 
            const [selectedDayIdx, setSelectedDayIdx] = useState(0);
            const [itineraryData, setItineraryData] = useState([]);
            const [expenses, setExpenses] = useState([]);
            const [isEditingPlan, setIsEditingPlan] = useState(false);
            const [editingPlan, setEditingPlan] = useState(null);
            const [editPlanBuffer, setEditPlanBuffer] = useState({ time: '', title: '' });
            const [fxInput, setFxInput] = useState('');
            const exchangeRate = 0.211;
            const [newExpense, setNewExpense] = useState({ date: new Date().toISOString().split('T')[0], payer: 'KCY', item: '', amount: '' });
            const [isSaving, setIsSaving] = useState(false);
            const [toast, setToast] = useState({ show: false, msg: '' });

            const members = ['KCY', 'Ruby', 'YSL', 'Tsai'];
            const dates = [
                { date: '5/30', dayName: 'SAT' }, { date: '5/31', dayName: 'SUN' },
                { date: '6/1', dayName: 'MON' }, { date: '6/2', dayName: 'TUE' },
                { date: '6/3', dayName: 'WED' }, { date: '6/4', dayName: 'THU' },
                { date: '6/5', dayName: 'FRI' }, { date: '6/6', dayName: 'SAT' }
            ];

            // 1. èº«ä»½é©—è­‰
            useEffect(() => {
                if (!isConfigValid) return;
                const initAuth = async () => {
                    try {
                        if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                            await auth.signInWithCustomToken(__initial_auth_token);
                        } else {
                            await auth.signInAnonymously();
                        }
                    } catch (err) {
                        console.error("Auth failed", err);
                    }
                };
                initAuth();
                const unsubscribe = auth.onAuthStateChanged(setUser);
                return () => unsubscribe();
            }, []);

            // 2. å³æ™‚ç›£è½é›²ç«¯
            useEffect(() => {
                if (!user || !db) return;
                const path = `artifacts/${appId}/public/data`;
                
                const unsubItinerary = db.collection(`${path}/itinerary`).onSnapshot(snap => {
                    setItineraryData(snap.docs.map(d => ({ id: d.id, ...d.data() })));
                });

                const unsubExpense = db.collection(`${path}/expenses`).onSnapshot(snap => {
                    const docs = snap.docs.map(d => ({ id: d.id, ...d.data() }));
                    setExpenses(docs.sort((a, b) => new Date(b.date) - new Date(a.date)));
                });

                return () => { unsubItinerary(); unsubExpense(); };
            }, [user]);

            const currentDayPlans = useMemo(() => {
                return itineraryData
                    .filter(p => p.targetDate === dates[selectedDayIdx].date)
                    .sort((a, b) => (a.time || '99:99').replace(':', '') - (b.time || '99:99').replace(':', ''));
            }, [itineraryData, selectedDayIdx]);

            const showToast = (msg) => {
                setToast({ show: true, msg });
                setTimeout(() => setToast({ show: false, msg: '' }), 3000);
            };

            const savePlan = async () => {
                if (!editPlanBuffer.time || !editPlanBuffer.title || !user) return;
                setIsSaving(true);
                try {
                    const id = editingPlan ? editingPlan.id : `plan-${Date.now()}`;
                    await db.doc(`artifacts/${appId}/public/data/itinerary/${id}`).set({
                        ...editPlanBuffer,
                        targetDate: dates[selectedDayIdx].date,
                        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                    }, { merge: true });
                    setIsEditingPlan(false);
                    showToast("é›²ç«¯åŒæ­¥æˆåŠŸ ğŸ’œ");
                } finally { setIsSaving(false); }
            };

            const addExpense = async () => {
                if (!newExpense.item || !newExpense.amount || !user) return;
                setIsSaving(true);
                try {
                    const id = `exp-${Date.now()}`;
                    await db.doc(`artifacts/${appId}/public/data/expenses/${id}`).set({
                        ...newExpense,
                        amount: parseFloat(newExpense.amount),
                        amountTwd: Math.round(parseFloat(newExpense.amount) * exchangeRate),
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    setNewExpense({ ...newExpense, item: '', amount: '' });
                    showToast("è¨˜å¸³å·²æˆåŠŸ ğŸ’œ");
                } finally { setIsSaving(false); }
            };

            const deleteItem = async (col, id) => {
                if (!window.confirm("ç¢ºå®šåˆªé™¤å—ï¼Ÿè³‡æ–™å°‡å¾é›²ç«¯ç§»é™¤")) return;
                await db.doc(`artifacts/${appId}/public/data/${col}/${id}`).delete();
                showToast("å·²åˆªé™¤");
            };

            const openMap = (q) => {
                const target = q.includes('å›é£¯åº—') ? 'åšå¤šç¥‡åœ’æ«›ç”°ç¥ç¤¾å‰è¥¿éµå…‹é­¯å§†é…’åº—' : q;
                window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(target)}`, '_blank');
            };

            // å¦‚æœè¨­å®šä¸å®Œå…¨ï¼Œé¡¯ç¤ºæç¤º
            if (!isConfigValid) {
                return (
                    <div className="flex flex-col items-center justify-center min-h-screen bg-purple-50 p-10 text-center">
                        <Icon name="alert-triangle" className="w-20 h-20 text-purple-400 mb-6" />
                        <h1 className="text-3xl font-black text-purple-900 mb-4">é›²ç«¯è¨­å®šç¼ºå¤±</h1>
                        <p className="text-purple-600 leading-relaxed">
                            æ‚¨æ­£å˜—è©¦åœ¨å¤–éƒ¨ç’°å¢ƒï¼ˆå¦‚ GitHubï¼‰åŸ·è¡Œæ­¤ Appã€‚<br/>
                            è«‹åœ¨ç¨‹å¼ç¢¼ä¸­å¡«å¯«æ‚¨çš„ <b>firebaseConfig</b> å…§å®¹ï¼Œ<br/>
                            App æ‰èƒ½é€£æ¥è‡³é›²ç«¯è³‡æ–™åº«ã€‚
                        </p>
                    </div>
                );
            }

            return (
                <div className="max-w-md mx-auto min-h-screen relative pb-32 bg-pattern">
                    {/* Toast è¨Šæ¯ */}
                    <div className={`fixed top-10 left-1/2 -translate-x-1/2 z-[200] transition-all duration-500 ${toast.show ? 'opacity-100 translate-y-0' : 'opacity-0 -translate-y-10 pointer-events-none'}`}>
                        <div className="bg-black/80 text-white px-8 py-4 rounded-full flex items-center gap-3 shadow-2xl border border-purple-400 backdrop-blur-md">
                            <Icon name="check-circle" className="text-pink-400 w-6 h-6" />
                            <span className="font-bold text-lg tracking-widest">{toast.msg}</span>
                        </div>
                    </div>

                    <header className="kuromi-gradient text-white p-10 pt-16 rounded-b-[80px] shadow-2xl relative overflow-hidden">
                        <div className="flex justify-between items-center relative z-10">
                            <div className="flex-1">
                                <h1 className="text-6xl font-bold tracking-tight" style={{ textShadow: '4px 4px 0px rgba(0,0,0,0.2)' }}>ç¦å²¡ 2026</h1>
                                <div className="flex items-center gap-3 mt-4">
                                    <span className="bg-black/30 px-5 py-2 rounded-full text-xs font-bold tracking-[0.3em]">KCY FAMILY</span>
                                    <Icon name="heart" className="w-6 h-6 text-pink-400 fill-pink-400 animate-pulse" />
                                </div>
                            </div>
                            <div className="bg-black/40 p-6 rounded-[50px] backdrop-blur-xl text-center border-2 border-white/20 min-w-[130px] shadow-2xl">
                                <Icon name="cloud-sun" className="w-14 h-14 mx-auto mb-1 text-[#FF91C1]" />
                                <p className="text-4xl font-black">24Â°C</p>
                                <p className="text-xs opacity-80 uppercase mt-1 font-bold">Fukuoka</p>
                            </div>
                        </div>
                    </header>

                    {itineraryView === 'list' && (
                        <nav className="flex bg-white/95 backdrop-blur-lg sticky top-0 z-50 px-8 mt-4 border-b-8 border-purple-100 shadow-lg">
                            {['itinerary', 'expense', 'tools'].map(tab => (
                                <button key={tab} onClick={() => setActiveTab(tab)} className={`flex-1 py-7 font-black text-xl transition-all ${activeTab === tab ? 'text-[#9D76C1] border-b-8 border-[#9D76C1]' : 'text-slate-400'}`}>
                                    {tab === 'itinerary' ? 'è¡Œç¨‹' : tab === 'expense' ? 'è¨˜å¸³' : 'å·¥å…·'}
                                </button>
                            ))}
                        </nav>
                    )}

                    <div className="px-8 py-10">
                        {activeTab === 'itinerary' && (
                            itineraryView === 'list' ? (
                                <div className="space-y-8 animate-in fade-in duration-500">
                                    <h2 className="text-3xl font-black text-slate-800 tracking-wider">é¸å€‹æ—¥æœŸå»æ¢éšªï¼ ğŸ’œ</h2>
                                    <div className="grid grid-cols-2 gap-6">
                                        {dates.map((day, idx) => (
                                            <div key={day.date} onClick={() => { setSelectedDayIdx(idx); setItineraryView('detail'); }} className="kuromi-card p-10 flex flex-col items-center justify-center text-center relative active:scale-95 border-b-[12px] border-b-[#9D76C1]">
                                                <span className="text-sm font-black text-purple-300 uppercase mb-2">{day.dayName}</span>
                                                <span className="text-7xl font-black text-slate-700 mb-4">{day.date.split('/')[1]}</span>
                                                <span className="text-xs font-black text-white bg-purple-400 px-5 py-2 rounded-full shadow-md">{day.date}</span>
                                                {itineraryData.some(p => p.targetDate === day.date) && <div className="absolute top-6 right-6 w-5 h-5 bg-pink-400 rounded-full animate-pulse border-4 border-white shadow-lg" />}
                                            </div>
                                        ))}
                                    </div>
                                    <button onClick={() => window.open('https://maps.app.goo.gl/pd5Mgn8orC6EG7dc6', '_blank')} className="w-full bg-[#2D2727] text-white py-8 rounded-[50px] flex items-center justify-center gap-5 shadow-2xl active:scale-95 border-4 border-purple-900/10 mt-6">
                                        <Icon name="map-pinned" className="text-pink-400 w-10 h-10" />
                                        <span className="font-black text-2xl tracking-wider">åœ°åœ–è¡Œç¨‹è¡¨ ğŸ’œ</span>
                                    </button>
                                </div>
                            ) : (
                                <div className="space-y-10 animate-in slide-in-from-bottom duration-500">
                                    <div className="flex items-center gap-6">
                                        <button onClick={() => setItineraryView('list')} className="p-6 bg-white rounded-full shadow-xl text-purple-600 active:scale-75 border-2 border-purple-50">
                                            <Icon name="chevron-left" className="w-10 h-10" />
                                        </button>
                                        <div>
                                            <h2 className="text-5xl font-black text-slate-800 tracking-tight">{dates[selectedDayIdx].date}</h2>
                                            <p className="text-sm font-black text-purple-400 uppercase mt-2 tracking-widest">æœ¬æ—¥å†’éšªè¨ˆç•«</p>
                                        </div>
                                    </div>
                                    <button onClick={() => { setEditingPlan(null); setEditPlanBuffer({time:'', title:''}); setIsEditingPlan(true); }} className="w-full bg-white border-4 border-dashed border-purple-200 text-purple-500 py-10 rounded-[50px] flex items-center justify-center gap-4 active:scale-95 shadow-inner hover:bg-purple-50 transition-all">
                                        <Icon name="calendar-plus" className="w-10 h-10" />
                                        <span className="font-black text-3xl">æ–°å¢è¡Œç¨‹è¨ˆç•« ğŸ’œ</span>
                                    </button>
                                    <div className="space-y-8">
                                        {currentDayPlans.map(plan => (
                                            <div key={plan.id} className="kuromi-card p-10 flex flex-col border-l-[25px] border-l-[#9D76C1] shadow-xl">
                                                <div className="flex justify-between items-start mb-8">
                                                    <span className="text-2xl font-black text-white bg-slate-800 px-6 py-2.5 rounded-full shadow-xl tracking-tight">{plan.time}</span>
                                                    <div className="flex gap-4">
                                                        <button onClick={() => { setEditingPlan(plan); setEditPlanBuffer({time:plan.time, title:plan.title}); setIsEditingPlan(true); }} className="p-5 bg-purple-50 text-purple-400 rounded-full active:scale-75"><Icon name="pencil-line" size={28} /></button>
                                                        <button onClick={() => deleteItem('itinerary', plan.id)} className="p-5 bg-red-50 text-red-400 rounded-full active:scale-75"><Icon name="trash-2" size={28} /></button>
                                                    </div>
                                                </div>
                                                <h3 className="text-4xl font-black text-slate-700 leading-tight pr-6">{plan.title}</h3>
                                            </div>
                                        ))}
                                        {currentDayPlans.length === 0 && (
                                            <div className="py-40 text-center opacity-20">
                                                <Icon name="sparkles" className="w-24 h-24 mx-auto mb-8 text-purple-200" />
                                                <p className="font-black text-3xl uppercase tracking-widest">ç›®å‰æ²’è¡Œç¨‹å”·</p>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            )
                        )}

                        {activeTab === 'expense' && (
                            <div className="space-y-12 animate-in fade-in duration-500">
                                <div className="bg-[#2D2727] text-white p-12 rounded-[60px] shadow-2xl relative overflow-hidden">
                                    <div className="absolute -right-6 -bottom-6 opacity-10 rotate-12"><Icon name="coins" size={200} /></div>
                                    <p className="text-md text-[#FF91C1] font-black uppercase tracking-[0.3em] mb-8">JPY â®• TWD å³æ™‚åŒ¯ç‡</p>
                                    <div className="flex items-center justify-between">
                                        <input type="number" value={fxInput} onChange={(e) => setFxInput(e.target.value)} placeholder="0" className="flex-1 bg-transparent text-7xl font-black focus:outline-none placeholder:text-white/10 tracking-tighter" />
                                        <div className="text-right">
                                            <p className="text-xs opacity-40 font-black mb-1">NT$</p>
                                            <p className="text-6xl font-black text-[#FF91C1] tracking-tighter">{Math.round((parseFloat(fxInput) || 0) * exchangeRate).toLocaleString()}</p>
                                        </div>
                                    </div>
                                </div>
                                <div className="bg-white rounded-[60px] p-12 space-y-10 shadow-2xl border-[8px] border-purple-100">
                                    <div className="flex justify-between items-center text-slate-800">
                                        <h3 className="text-3xl font-black italic underline decoration-pink-300 decoration-[6px] underline-offset-8">æ–°å¢èŠ±è²» ğŸ’œ</h3>
                                        <select value={newExpense.payer} onChange={(e) => setNewExpense({...newExpense, payer: e.target.value})} className="bg-purple-100 rounded-[30px] px-8 py-4 font-black text-lg text-[#9D76C1] outline-none border-none shadow-inner">
                                            {members.map(m => <option key={m}>{m}</option>)}
                                        </select>
                                    </div>
                                    <div className="space-y-8">
                                        <input type="date" value={newExpense.date} onChange={(e) => setNewExpense({...newExpense, date: e.target.value})} className="w-full border-b-6 border-purple-50 pb-6 text-2xl font-black focus:border-purple-400 outline-none bg-transparent" />
                                        <input placeholder="å“é …åç¨±ï¼Ÿ" value={newExpense.item} onChange={(e) => setNewExpense({...newExpense, item: e.target.value})} className="w-full border-b-6 border-purple-50 pb-6 text-2xl font-black focus:border-purple-400 outline-none" />
                                        <input type="number" placeholder="æ—¥å¹£é‡‘é¡ Â¥" value={newExpense.amount} onChange={(e) => setNewExpense({...newExpense, amount: e.target.value})} className="w-full border-4 border-purple-50 p-7 text-3xl font-black focus:border-purple-400 outline-none bg-slate-50 rounded-[40px]" />
                                    </div>
                                    <button onClick={addExpense} disabled={isSaving} className="w-full kuromi-gradient text-white py-10 rounded-[50px] font-black text-3xl shadow-xl active:scale-95 transition-all">
                                        {isSaving ? <Icon name="refresh-cw" className="animate-spin mx-auto" /> : "å„²å­˜åˆ°é›²ç«¯ ğŸ’œ"}
                                    </button>
                                </div>
                                {expenses.map(ex => (
                                    <div key={ex.id} className="kuromi-card p-10 flex justify-between items-center border-l-[25px] border-l-[#9D76C1] shadow-xl">
                                        <div>
                                            <div className="flex items-center gap-4 mb-3">
                                                <span className="text-sm font-black text-white bg-slate-800 px-4 py-1.5 rounded-xl">{ex.date}</span>
                                                <span className="text-md text-slate-400 font-black uppercase font-bold tracking-widest">{ex.payer}</span>
                                            </div>
                                            <p className="text-4xl font-black text-slate-700">{ex.item}</p>
                                        </div>
                                        <div className="text-right flex items-center gap-6">
                                            <div>
                                                <p className="text-5xl font-black text-slate-800 tracking-tighter">Â¥{ex.amount.toLocaleString()}</p>
                                                <p className="text-md font-black text-pink-400 tracking-widest">NT${ex.amountTwd.toLocaleString()}</p>
                                            </div>
                                            <button onClick={() => deleteItem('expenses', ex.id)} className="p-5 bg-red-50 text-red-400 rounded-full active:scale-90 shadow-sm"><Icon name="trash-2" size={32}/></button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}

                        {activeTab === 'tools' && (
                            <div className="space-y-16 animate-in fade-in duration-500">
                                <section className="bg-white rounded-[60px] border-[10px] border-[#9D76C1] p-12 shadow-2xl relative">
                                    <Icon name="hotel" className="absolute -right-10 -top-10 w-24 h-24 text-purple-200 animate-bounce" />
                                    <h3 className="text-5xl font-black mb-4 text-[#2D2727]">åšå¤šè¥¿éµ CROOM</h3>
                                    <p className="text-md text-slate-400 mb-12 font-black uppercase tracking-[0.2em]">æ«›ç”°ç¥ç¤¾å‰ç«™ 4 è™Ÿå‡ºå£å°é¢</p>
                                    <div className="flex gap-8">
                                        <button onClick={() => window.open('https://www.google.com/maps/search/?api=1&query=åšå¤šç¥‡åœ’æ«›ç”°ç¥ç¤¾å‰è¥¿éµå…‹é­¯å§†é…’åº—','_blank')} className="flex-1 kuromi-gradient text-white py-9 rounded-[45px] font-black text-2xl shadow-2xl active:scale-95 transition-all">åœ°åœ– ğŸ“</button>
                                        <a href="tel:092-235-0311" className="flex-1 border-6 border-[#2D2727] text-center py-9 rounded-[45px] font-black text-2xl active:scale-95 transition-all">æ’¥æ‰“ ğŸ“</a>
                                    </div>
                                </section>
                                <section className="bg-slate-100 p-12 rounded-[60px] border-4 border-dashed border-slate-300 opacity-60">
                                    <p className="font-black text-slate-500 text-center flex items-center justify-center gap-4 text-xl tracking-[0.1em]">
                                        <Icon name="shield-check" className="w-8 h-8 text-green-500" /> é›²ç«¯é€£ç·šæ­£å¸¸é‹ä½œä¸­
                                    </p>
                                    <p className="text-xs text-slate-400 text-center mt-5 uppercase tracking-[0.4em] font-black">App ID: {appId}</p>
                                </section>
                            </div>
                        )}
                    </div>

                    {/* ç·¨è¼¯è¡Œç¨‹å½ˆçª— */}
                    {isEditingPlan && (
                        <div className="fixed inset-0 z-[110] modal-mask flex items-center justify-center p-8 animate-in fade-in duration-300">
                            <div className="bg-white w-full rounded-[70px] p-16 shadow-2xl space-y-12 border-[12px] border-purple-100 animate-in zoom-in duration-300">
                                <h3 className="text-5xl font-black text-slate-800 flex items-center gap-5 tracking-widest italic underline decoration-pink-300 decoration-[10px]">ç·¨è¼¯å†’éšª âœï¸</h3>
                                <div className="space-y-10 text-left">
                                    <div>
                                        <label className="text-sm font-black text-slate-400 ml-6 tracking-[0.4em] uppercase">æŠµé”æ™‚é–“</label>
                                        <input value={editPlanBuffer.time} onChange={(e) => setEditPlanBuffer({...editPlanBuffer, time: e.target.value})} placeholder="ä¾‹å¦‚ 14:30" className="w-full border-4 border-purple-50 p-6 text-4xl font-black focus:border-purple-400 outline-none bg-slate-50 rounded-[40px] mt-4" />
                                    </div>
                                    <div>
                                        <label className="text-sm font-black text-slate-400 ml-6 tracking-[0.4em] uppercase">è¨ˆç•«å…§å®¹</label>
                                        <input value={editPlanBuffer.title} onChange={(e) => setEditPlanBuffer({...editPlanBuffer, title: e.target.value})} placeholder="è¦åšä»€éº¼å‘¢ï¼Ÿ" className="w-full border-4 border-purple-50 p-6 text-4xl font-black focus:border-purple-400 outline-none bg-slate-50 rounded-[40px] mt-4" />
                                    </div>
                                </div>
                                <div className="flex gap-6 pt-6">
                                    <button onClick={savePlan} disabled={isSaving} className="flex-1 kuromi-gradient text-white py-10 rounded-[50px] font-black text-3xl shadow-2xl active:scale-95">ç¢ºèªå„²å­˜ ğŸ’œ</button>
                                    <button onClick={() => setIsEditingPlan(false)} className="px-14 bg-slate-100 text-slate-400 rounded-[50px] font-black text-2xl hover:bg-slate-200 active:scale-95 transition-all">å–æ¶ˆ</button>
                                </div>
                            </div>
                        </div>
                    )}
                    <div className="fixed bottom-0 left-0 right-0 h-10 kuromi-gradient z-[60] shadow-[0_-5px_15px_rgba(0,0,0,0.1)]" />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
